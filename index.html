<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>VivÃ­ la Cultura Versat</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  body {
    margin: 0;
    background: linear-gradient(180deg, #2C3E50, #1f2a36);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: Arial, sans-serif;
    color: #2C3E50;
  }

  #game {
    position: relative;
    width: 960px;
    height: 540px;
    background: linear-gradient(180deg, #f5f7fa, #e4e8ec);
    overflow: hidden;
    border-radius: 16px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  }

  #hud {
    position: absolute;
    top: 10px;
    left: 20px;
    font-weight: bold;
  }

  /* PERSONAGEM = V */
  #player {
    position: absolute;
    width: 50px;
    height: 70px;
    left: 40px;
    bottom: 60px;
    font-size: 64px;
    font-weight: 900;
    color: #00CF74;
    line-height: 70px;
    text-align: center;
    user-select: none;
  }

  .platform {
    position: absolute;
    background: #2C3E50;
    border-radius: 8px;
  }

  #ground {
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40px;
  }

  #door {
    position: absolute;
    width: 60px;
    height: 90px;
    right: 40px;
    bottom: 40px;
    background: linear-gradient(180deg, #145BB3, #0e3f80);
    border-radius: 10px;
    box-shadow: 0 0 15px rgba(20,91,179,0.6);
  }

  /* PERGUNTA */
  #question {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: none;
    justify-content: center;
    align-items: center;
  }

  #card {
    background: white;
    padding: 30px;
    width: 70%;
    border-radius: 16px;
    text-align: center;
  }

  #card h2 {
    margin-top: 0;
  }

  #card button {
    display: block;
    width: 100%;
    margin: 10px 0;
    padding: 14px;
    font-size: 16px;
    background: #00CF74;
    border: none;
    color: white;
    cursor: pointer;
    border-radius: 8px;
    text-align: left;
  }

  #card button:hover {
    opacity: 0.9;
  }

  #feedback {
    margin-top: 10px;
    font-weight: bold;
  }
  /* ANIMAÃ‡ÃƒO DO PLAYER */
#player {
  transition: left 0.1s linear;
}

.walk {
  animation: walk 0.4s infinite alternate;
}

@keyframes walk {
  from { transform: translateY(0); }
  to { transform: translateY(-4px); }
}

/* NPCs */
.npc {
  position: absolute;
  width: 40px;
  height: 60px;
  background: #e74c3c;
  border-radius: 10px;
  bottom: 40px;
}

/* Porta animada */
#door {
  animation: glow 1.5s infinite alternate;
}

@keyframes glow {
  from { box-shadow: 0 0 10px rgba(20,91,179,0.4); }
  to { box-shadow: 0 0 25px rgba(20,91,179,0.9); }
}

</style>
</head>

<body>

<div id="game">
  <div id="hud">Fase 1 / 6</div>

  <div id="player">V</div>
  <div id="door"></div>
  <div class="npc" style="left:300px;"></div>
<div class="npc" style="left:520px;"></div>

  <div id="ground" class="platform"></div>

  <div id="question">
    <div id="card">
      <h2 id="qText"></h2>
      <div id="options"></div>
      <p id="feedback"></p>
    </div>
  </div>
</div>

<script>
/* ===== DADOS DAS FASES ===== */
const phases = [
  {
    q: "Â¿QuÃ© representa la cultura Versat en el dÃ­a a dÃ­a?",
    a: [
      { t: "Un manual estÃ¡tico sin impacto", c: false },
      { t: "La forma en que trabajamos, decidimos y nos relacionamos", c: true },
      { t: "Solo la identidad visual", c: false }
    ]
  },
  {
    q: "Â¿Para quÃ© sirve el Culture Code?",
    a: [
      { t: "Para alinear comportamientos y decisiones", c: true },
      { t: "Para controlar tareas individuales", c: false },
      { t: "Para uso exclusivo del liderazgo", c: false }
    ]
  },
  {
    q: "La cultura Versat se vive principalmenteâ€¦",
    a: [
      { t: "En el dÃ­a a dÃ­a de cada persona", c: true },
      { t: "Solo en eventos corporativos", c: false },
      { t: "En documentos internos", c: false }
    ]
  },
  {
    q: "Â¿QuiÃ©n es responsable de la cultura Versat?",
    a: [
      { t: "El Ã¡rea de RRHH", c: false },
      { t: "Cada persona del equipo", c: true },
      { t: "Solo los lÃ­deres", c: false }
    ]
  },
  {
    q: "La cultura Versat ayuda principalmente aâ€¦",
    a: [
      { t: "Tomar mejores decisiones", c: true },
      { t: "Reducir la comunicaciÃ³n", c: false },
      { t: "Evitar cambios", c: false }
    ]
  },
  {
    q: "Vivir la cultura Versat significaâ€¦",
    a: [
      { t: "Actuar con coherencia y compromiso", c: true },
      { t: "Seguir reglas sin cuestionar", c: false },
      { t: "Priorizar resultados sin valores", c: false }
    ]
  }
];

/* ===== ESTADO ===== */
const keys = {
  left: false,
  right: false,
  up: false
};

  let phase = 0;
let x = 40, y = 60, vy = 0;
let onGround = true;
let questionOpen = false;


const player = document.getElementById("player");
const door = document.getElementById("door");
const question = document.getElementById("question");
const qText = document.getElementById("qText");
const options = document.getElementById("options");
const feedback = document.getElementById("feedback");
const hud = document.getElementById("hud");
const npcs = document.querySelectorAll(".npc");

/* ===== CONTROLES ===== */
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") keys.left = true;
  if (e.key === "ArrowRight") keys.right = true;
  if (e.key === "ArrowUp") keys.up = true;
});

document.addEventListener("keyup", e => {
  if (e.key === "ArrowLeft") keys.left = false;
  if (e.key === "ArrowRight") keys.right = false;
  if (e.key === "ArrowUp") keys.up = false;

  if (!keys.left && !keys.right) {
    player.classList.remove("walk");
  }
});

/* ===== LOOP ===== */
function update() {
  vy -= 1;
  y += vy;

  if (y <= 60) {
    y = 60;
    vy = 0;
    onGround = true;
  }

  player.style.left = x + "px";
  player.style.bottom = y + "px";
// movimento horizontal
if (keys.right) {
  x += 5;
  player.classList.add("walk");
}

if (keys.left) {
  x -= 5;
  player.classList.add("walk");
}

// pulo
if (keys.up && onGround) {
  vy = 16;
  onGround = false;
}

  checkDoor();
  checkNPC();
  
  requestAnimationFrame(update);
}

/* ===== COLISÃƒO COM PORTA ===== */
function checkDoor() {
  if (questionOpen) return;

  const p = player.getBoundingClientRect();
  const d = door.getBoundingClientRect();

  if (
    p.right > d.left &&
    p.left < d.right &&
    p.bottom > d.top &&
    p.top < d.bottom
  ) {
    questionOpen = true;
    openQuestion();
  }
}
function checkNPC() {
  const p = player.getBoundingClientRect();

  npcs.forEach(npc => {
    const n = npc.getBoundingClientRect();

    if (
      p.right > n.left &&
      p.left < n.right &&
      p.bottom > n.top &&
      p.top < n.bottom
    ) {
      // volta ao inÃ­cio da fase
      x = 40;
      y = 60;
      player.classList.remove("walk");
    }
  });
}

/* ===== PERGUNTA ===== */
function openQuestion() {
  question.style.display = "flex";
  hud.innerText = `Fase ${phase + 1} / 6`;
  feedback.innerText = "";

  qText.innerText = phases[phase].q;
  options.innerHTML = "";

  phases[phase].a.sort(() => Math.random() - 0.5);

  phases[phase].a.forEach(opt => {
    const btn = document.createElement("button");
    btn.innerText = opt.t;
    btn.onclick = () => answer(opt.c);
    options.appendChild(btn);
  });
}


function answer(correct) {
  if (correct) {
    feedback.innerText = "âœ… Â¡Correcto!";
    setTimeout(nextPhase, 800);
  } else {
    feedback.innerText = "âŒ No es asÃ­. IntentÃ¡ de nuevo.";
  }
}

function nextPhase() {
  question.style.display = "none";
  phase++;
  questionOpen = false;

  if (phase >= phases.length) {
    alert("ðŸŽ‰ Â¡Completaste las 6 fases! VivÃ­s la cultura Versat.");
    phase = 0;
  }

  x = 40;
  hud.innerText = `Fase ${phase + 1} / 6`;
}

update();
</script>

</body>
</html>

